import java.net.*;
import java.io.*;

public class Server {
	
	public static void main(String[] args) throws Exception {
			
		  ServerSocket serverSocket = new ServerSocket(0);
	      
	        
	      System.out.println("Server started on port " + serverSocket.getLocalPort());
	      
	      while (true) {
		       
	    	  Socket clientSocket = null;
		      try {
		          clientSocket = serverSocket.accept();
		      } catch (IOException e) {
		          System.err.println("Accept failed.");
		          System.exit(1);
		      }
	        
	        System.out.println("Somebody connected");

	        PrintWriter out = new PrintWriter(clientSocket.getOutputStream(), true);
	        BufferedReader in = new BufferedReader(
	                new InputStreamReader(
	                clientSocket.getInputStream()));
	        
	        String inputLine = "";
	        
	        // get the response
	        while (!inputLine.equals(""))
	        	inputLine = in.readLine();
	        
	        
	        // output an ack
	        String outputLine = "response from server";
	        out.println(outputLine);
	        out.flush();
	        
	        clientSocket.close();
	        
	    } // end of while
	           
	        
	} // end of main
	
	
}// end of class